# 开发规范

---

## 代码风格

### JavaScript

- 使用 **ES6+** 语法（箭头函数、解构、模板字符串等）
- **变量命名**：camelCase
- **常量命名**：UPPER_SNAKE_CASE
- **函数注释**：使用 **JSDoc** 格式
- **缩进**：2 空格
- **字符串**：单引号优先

**示例：**
```javascript
const MAX_RETRY = 3

/**
 * 获取商品列表
 * @param {Object} params - 查询参数
 * @param {string} params.categoryId - 分类ID
 * @param {number} params.page - 页码
 * @returns {Promise<{ list: Array, total: number }>}
 */
function getProductList({ categoryId, page = 1 }) {
  return request.get('/products', { categoryId, page, limit: 10 })
}
```

---

### WXML

- **属性顺序**：`id` → `class` → `bind/catch` 事件 → `data-*` → 其他属性
- **属性值**：使用双引号
- **列表渲染**：必须加 `wx:key`，优先使用唯一 id
- **条件渲染**：复杂逻辑用 `wx:if`，简单切换用 `hidden`

**示例：**
```html
<view class="product-list">
  <view
    wx:for="{{list}}"
    wx:key="_id"
    class="item"
    bindtap="onItemTap"
    data-id="{{item._id}}"
  >
    {{item.name}}
  </view>
</view>
```

---

### WXSS

- **尺寸单位**：使用 **rpx** 适配不同屏幕
- **颜色**：优先使用 **CSS 变量**（如 `var(--primary)`）
- **类名**：使用 **kebab-case**
- **选择器**：避免过深嵌套（建议 ≤ 3 层）

**示例：**
```css
.product-card {
  padding: 20rpx;
  background-color: var(--surface);
  border-radius: 16rpx;
}

.product-card__title {
  font-size: 28rpx;
  color: var(--text-primary);
}
```

---

## 文件命名

| 类型 | 命名 | 示例 |
|------|------|------|
| 页面 | 目录名/index.* | pages/menu/index.js |
| 组件 | component-name.* | product-card.js |
| 工具 | 功能名.js（单数） | util.js, request.js |
| 静态资源 | 小写+连字符 | home-banner.png |

---

## Git 提交规范

**格式：** `<type>: <subject>`

### type 类型

| type | 说明 |
|------|------|
| feat | 新功能 |
| fix | 修复 bug |
| docs | 文档变更 |
| style | 代码格式（不影响逻辑） |
| refactor | 重构 |
| test | 测试相关 |
| chore | 构建/工具/依赖等 |

### 示例

```
feat: 添加商品列表页面
feat: 购物车支持数量修改
fix: 修复购物车数量计算错误
fix: 修复订单列表下拉刷新异常
docs: 更新 API 接口文档
style: 统一首页样式变量
refactor: 抽离商品卡片为组件
test: 添加 request 单元测试
chore: 升级 ESLint 配置
```

### 规则

- subject 使用中文或英文，简洁明了
- 长度建议 50 字以内
- 不写句号结尾
